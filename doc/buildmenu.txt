*buildmenu.txt*	Plugin for managing a list of build targets

==============================================================================
INTRODUCTION                                                 *Buildmenu-intro*

Author:  Andrej Stender
License: WTFPL, see http://sam.zoy.org/wtfpl/COPYING


If you use the build-tool {Waf} http://code.google.com/p/waf, this plugin will
assist you by providing a comfortable sidebar menu which lists all existing
build-targets of your current project. You can select a target and start
building by pressing <Return>. 

This script is still far from being feature complete.

==============================================================================
SETUP                                                        *Buildmenu-setup*

Preconditions that must be met for Buildmenu to work properly:

The {Waf} binary must be installed on the system. 

The vim option |makeprg| must specify this {Waf} binary. To do that place a
line like the following one in your |.vimrc| file: >
   :set makeprg=./waf
<

The {Waf} build system by default expects the user to place the {Waf} binary
in the root directory of his/her code project, together with a {wscript}
file. This is why the example |.vimrc| line above sets |makeprg| to './waf'.
If your {Waf} binary is located in another path, then you need to set
|makeprg| to this path.

Nevertheless for {Waf} (and this plugin) to work properly, the current
working directory (|:pwd|) must be the root directory of your code project,
which also contains the root makefile for the {Waf} buildsystem, which is
usually named {wscript}. So either start vim in the root directory of
your project or use the vim command |:cd| to change into that directory.

An error message will be shown if one of these preconditions is not met
and you try to open the Buildmenu.

==============================================================================
WAF                                                            *Buildmenu-waf*

So far this plugin merely works with the {Waf} buildsystem
http://code.google.com/p/waf. However support of other buildsystems like e.g.
SCons and GNU Make is planned for future versions.

With {Waf} it is very easy for this plugin to provide a list of build-targets,
because this build system provides a command line argument to list all
targets: >
   $ ./waf list 
<

Not all other buildsystems do provide this feature.

==============================================================================
MAPPINGS                                                  *Buildmenu-mappings*

To create a mapping to the command |:BuildmenuToggle| add a line like the
following to your |.vimrc| file: >
   map <YOURMAPPEDKEY> <Plug>BuildmenuToggle
<

Example: Choosing to map the key <F4>: >
   map <F4> <Plug>BuildmenuToggle
<

==============================================================================
COMMANDS                                                  *Buildmenu-commands*

:BuildmenuOpen                                                *:BuildmenuOpen*
Opens a new Buildmenu. This menu is opened as a vsplit on the right side of
the screen. It contains a list of all build-targets of your project.

:BuildmenuClose                                              *:BuildmenuClose*
Closes an open Buildmenu. 

:BuildmenuToggle                                            *:BuildmenuToggle*
If no buildmenu is open, then this command acts identically to the
|:BuildmenuOpen| command. If there is already an open Buildmenu, then this
command acts identically to the |:BuildmenuClose| command.

:BuildmenuMake                                                *:BuildmenuMake*
If you already selected a target from the Buildmenu for building, then this
command is added to vim's history of ex-commands. It is equivalent to >
   :mak --targets=<WHATEVERYOUSELECTED>
<
If you did not select anything so far, then issueing this command will merely
execute >
   :mak
<

==============================================================================
SETTINGS                                                  *Buildmenu-settings*

g:BuildmenuGetTargetListCmd                        *BuildmenuGetTargetListCmd*
shell command to obtain list of buildtargets. Default value: >
    let g:BuildmenuGetTargetListCmd = &makeprg . " list"
<
vim option |makeprg| is expected to specify the {Waf} binary, so the resulting
default value for the shell command should be: >
    '$ ./waf list'
<


 vim:tw=78:et:ft=help:norl:
